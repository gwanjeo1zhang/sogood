<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Untitled</title>
  <link rel="stylesheet" href="./style.css">

</head>
<body>
<!-- partial:index.partial.html -->
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸŒ¤ï¸ ë‚ ì”¨ ê¸°ë°˜ ì „ë ¥ ì‚¬ìš©ëŸ‰ ì˜ˆì¸¡ ì‹œìŠ¤í…œ</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 50%, #6c5ce7 100%);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        
        /* ë°°ê²½ ë‚ ì”¨ ì• ë‹ˆë©”ì´ì…˜ */
        .weather-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        
        .cloud {
            position: absolute;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50px;
            opacity: 0.6;
            animation: float 20s infinite linear;
        }
        
        .cloud:before {
            content: '';
            position: absolute;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50px;
        }
        
        .cloud1 {
            width: 80px;
            height: 40px;
            top: 20%;
            left: -100px;
            animation-duration: 25s;
        }
        
        .cloud1:before {
            width: 50px;
            height: 50px;
            top: -25px;
            left: 10px;
        }
        
        .cloud2 {
            width: 60px;
            height: 30px;
            top: 60%;
            left: -80px;
            animation-duration: 30s;
            animation-delay: -5s;
        }
        
        .cloud2:before {
            width: 40px;
            height: 40px;
            top: -20px;
            left: 15px;
        }
        
        .cloud3 {
            width: 100px;
            height: 50px;
            top: 10%;
            left: -120px;
            animation-duration: 35s;
            animation-delay: -10s;
        }
        
        .cloud3:before {
            width: 60px;
            height: 60px;
            top: -30px;
            left: 20px;
        }
        
        @keyframes float {
            0% { transform: translateX(-100px); }
            100% { transform: translateX(calc(100vw + 100px)); }
        }
        
        .sun {
            position: absolute;
            top: 10%;
            right: 15%;
            width: 60px;
            height: 60px;
            background: radial-gradient(circle, #ffeaa7 0%, #fdcb6e 100%);
            border-radius: 50%;
            box-shadow: 0 0 20px rgba(253, 203, 110, 0.5);
            animation: shine 3s ease-in-out infinite alternate;
        }
        
        .sun:before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, transparent 30%, rgba(255, 234, 167, 0.3) 70%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            animation: rotate 20s linear infinite;
        }
        
        @keyframes shine {
            0% { transform: scale(1); }
            100% { transform: scale(1.1); }
        }
        
        @keyframes rotate {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .header h1 {
            font-size: 2.5em;
            background: linear-gradient(135deg, #0984e3, #6c5ce7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            font-weight: 700;
        }
        
        .header p {
            color: #636e72;
            font-size: 1.1em;
            opacity: 0.8;
        }
        
        .weather-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(15px);
            border-radius: 25px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .weather-card:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #74b9ff, #0984e3, #6c5ce7);
        }
        
        .section-title {
            display: flex;
            align-items: center;
            font-size: 1.5em;
            font-weight: 600;
            color: #2d3436;
            margin-bottom: 25px;
        }
        
        .section-title .icon {
            font-size: 1.8em;
            margin-right: 15px;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.1));
        }
        
        .training-info {
            background: linear-gradient(135deg, #e8f4fd 0%, #d1ecf1 100%);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 5px solid #74b9ff;
        }
        
        .training-controls {
            display: flex;
            gap: 15px;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        .weather-button {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(116, 185, 255, 0.4);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .weather-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(116, 185, 255, 0.6);
        }
        
        .weather-button:disabled {
            background: linear-gradient(135deg, #b2bec3, #636e72);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .weather-button.stop {
            background: linear-gradient(135deg, #fd79a8, #e84393);
            box-shadow: 0 5px 15px rgba(253, 121, 168, 0.4);
        }
        
        .weather-button.reset {
            background: linear-gradient(135deg, #00b894, #00a085);
            box-shadow: 0 5px 15px rgba(0, 184, 148, 0.4);
        }
        
        .progress-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .progress-bar {
            width: 100%;
            height: 25px;
            background: linear-gradient(90deg, #ddd, #f8f9fa);
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #74b9ff, #0984e3, #6c5ce7);
            border-radius: 15px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }
        
        .progress-fill:after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
        
        .stat-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-top: 4px solid;
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-card.learning-rate {
            border-top-color: #fd79a8;
        }
        
        .stat-card.accuracy {
            border-top-color: #00b894;
        }
        
        .stat-card:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }
        
        .stat-card:hover:before {
            transform: translateX(100%);
        }
        
        .stat-value {
            font-size: 2.2em;
            font-weight: 700;
            color: #2d3436;
            margin-bottom: 10px;
        }
        
        .stat-label {
            color: #636e72;
            font-size: 1em;
            font-weight: 500;
        }
        
        .weather-form {
            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin: 25px 0;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .input-group {
            position: relative;
        }
        
        .input-group label {
            display: flex;
            align-items: center;
            font-weight: 600;
            color: #2d3436;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .input-group label .emoji {
            font-size: 1.5em;
            margin-right: 10px;
        }
        
        .input-group input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #ddd;
            border-radius: 15px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
        }
        
        .input-group input:focus {
            outline: none;
            border-color: #74b9ff;
            box-shadow: 0 0 0 3px rgba(116, 185, 255, 0.1);
            transform: translateY(-2px);
        }
        
        .input-hint {
            color: #636e72;
            font-size: 0.9em;
            margin-top: 5px;
            opacity: 0.8;
        }
        
        .prediction-result {
            background: linear-gradient(135deg, #d1f2eb 0%, #a3e4d7 100%);
            border: 2px solid #00b894;
            border-radius: 25px;
            padding: 30px;
            margin: 25px 0;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 184, 148, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .prediction-result:before {
            content: 'âš¡';
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2em;
            opacity: 0.3;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .prediction-value {
            font-size: 3em;
            font-weight: 700;
            color: #00a085;
            margin: 15px 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .confidence {
            color: #2d3436;
            font-size: 1.2em;
            font-weight: 500;
            margin-top: 15px;
        }
        
        .chart-container {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin: 25px 0;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            height: 400px;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin: 25px 0;
        }
        
        .data-table th {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 20px;
            text-align: center;
            font-weight: 600;
            font-size: 1em;
        }
        
        .data-table td {
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid #f8f9fa;
            transition: background 0.3s ease;
        }
        
        .data-table tr:hover {
            background: #f8f9fa;
        }
        
        .learning-indicator {
            display: inline-flex;
            align-items: center;
            margin-left: 15px;
        }
        
        .raindrop {
            width: 8px;
            height: 12px;
            background: #74b9ff;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            margin: 0 3px;
            animation: fall 1.5s infinite ease-in-out;
        }
        
        .raindrop:nth-child(2) { animation-delay: 0.3s; }
        .raindrop:nth-child(3) { animation-delay: 0.6s; }
        
        @keyframes fall {
            0%, 80%, 100% {
                transform: translateY(0) scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: translateY(10px) scale(1);
                opacity: 1;
            }
        }
        
        .weather-info-banner {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 249, 250, 0.95));
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 5px solid #74b9ff;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }
        
        .status-indicator {
            display: inline-flex;
            align-items: center;
            padding: 8px 15px;
            background: rgba(116, 185, 255, 0.1);
            border-radius: 20px;
            color: #0984e3;
            font-weight: 500;
            margin-left: 15px;
        }
        
        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .container { padding: 15px; }
            .header h1 { font-size: 2em; }
            .form-grid { grid-template-columns: 1fr; }
            .stats-grid { grid-template-columns: 1fr; }
            .training-controls { flex-direction: column; align-items: stretch; }
            .weather-button { justify-content: center; }
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
</head>
<body>
    <!-- ë°°ê²½ ë‚ ì”¨ ì• ë‹ˆë©”ì´ì…˜ -->
    <div class="weather-bg">
        <div class="cloud cloud1"></div>
        <div class="cloud cloud2"></div>
        <div class="cloud cloud3"></div>
        <div class="sun"></div>
    </div>

    <div class="container">
        <div class="header">
            <h1>ğŸŒ¤ï¸ ë‚ ì”¨ ê¸°ë°˜ ì „ë ¥ ì‚¬ìš©ëŸ‰ ì˜ˆì¸¡ ì‹œìŠ¤í…œ</h1>
            <p>ì§€ì—­ ë‚ ì”¨ ë°ì´í„°ë¥¼ í™œìš©í•œ AI ë¨¸ì‹ ëŸ¬ë‹ ì „ë ¥ ì˜ˆì¸¡ ëª¨ë¸</p>
        </div>
        
        <div class="weather-card">
            <h2 class="section-title">
                <span class="icon">ğŸ¤–</span>
                AI ëª¨ë¸ í•™ìŠµ ë° ìµœì í™”
            </h2>
            
            <div class="weather-info-banner">
                <p style="margin: 0; color: #2d3436;"><strong>ğŸ“Š í•™ìŠµ ë°ì´í„°:</strong> ëŒ€ì „ ì§€ì—­ 2015-2023ë…„ (9ê°œ ë…„ë„)</p>
                <p style="margin: 5px 0 0 0; color: #636e72;">ğŸŒ§ï¸ ê°•ìˆ˜ëŸ‰ + â˜€ï¸ ì¼ì‚¬ëŸ‰ + ğŸŒªï¸ í’ì† â†’ âš¡ ì „ë ¥ ì‚¬ìš©ëŸ‰ ì˜ˆì¸¡</p>
            </div>
            
            <div class="training-controls">
                <button class="weather-button" onclick="startTraining()" id="trainBtn">
                    <span>ğŸš€</span> í•™ìŠµ ì‹œì‘
                </button>
                <button class="weather-button stop" onclick="stopTraining()" id="stopBtn" disabled>
                    <span>â¹ï¸</span> í•™ìŠµ ì¤‘ì§€
                </button>
                <button class="weather-button reset" onclick="resetModel()">
                    <span>ğŸ”„</span> ëª¨ë¸ ì´ˆê¸°í™”
                </button>
                <span class="status-indicator" id="trainingStatus">ëª¨ë¸ ì¤€ë¹„ ì™„ë£Œ</span>
                <div class="learning-indicator" id="learningIndicator" style="display: none;">
                    <span class="raindrop"></span>
                    <span class="raindrop"></span>
                    <span class="raindrop"></span>
                </div>
            </div>
            
            <div class="progress-container">
                <h3 style="color: #2d3436; margin-bottom: 15px;">ğŸ“ˆ í•™ìŠµ ì§„í–‰ ìƒí™©</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
                <p style="margin-top: 10px; color: #636e72;">
                    ì—í¬í¬: <span id="currentEpoch">0</span> / <span id="totalEpochs">1000</span>
                </p>
            </div>
            
            <div class="stats-grid">
                <div class="stat-card learning-rate">
                    <div class="stat-value" id="learningRate">0.001</div>
                    <div class="stat-label">ğŸ¯ í•™ìŠµë¥ </div>
                </div>
                <div class="stat-card accuracy">
                    <div class="stat-value" id="accuracy">0%</div>
                    <div class="stat-label">ğŸ¯ ì •í™•ë„</div>
                </div>
            </div>
        </div>

        <div class="weather-card">
            <h2 class="section-title">
                <span class="icon">ğŸ”®</span>
                ë‚ ì”¨ ê¸°ë°˜ ì „ë ¥ ì‚¬ìš©ëŸ‰ ì˜ˆì¸¡
            </h2>
            
            <div class="weather-form">
                <h3 style="color: #2d3436; margin-bottom: 20px; text-align: center;">ğŸŒ¦ï¸ ë‚ ì”¨ ì¡°ê±´ì„ ì…ë ¥í•´ì£¼ì„¸ìš”</h3>
                <div class="form-grid">
                    <div class="input-group">
                        <label>
                            <span class="emoji">ğŸ’§</span>
                            ê°•ìˆ˜ëŸ‰ (mm)
                        </label>
                        <input type="number" id="inputRainfall" placeholder="ì˜ˆ: 1200.5" step="0.1" min="0">
                        <div class="input-hint">ë²”ìœ„: 0 ~ 3000mm (ì—°ê°„ ì´ ê°•ìˆ˜ëŸ‰)</div>
                    </div>
                    <div class="input-group">
                        <label>
                            <span class="emoji">â˜€ï¸</span>
                            ì¼ì‚¬ëŸ‰ (MJ/mÂ²)
                        </label>
                        <input type="number" id="inputSolar" placeholder="ì˜ˆ: 5600.3" step="0.1" min="0">
                        <div class="input-hint">ë²”ìœ„: 3000 ~ 8000 MJ/mÂ² (ì—°ê°„ ì´ ì¼ì‚¬ëŸ‰)</div>
                    </div>
                    <div class="input-group">
                        <label>
                            <span class="emoji">ğŸŒªï¸</span>
                            í’ì† (m/s)
                        </label>
                        <input type="number" id="inputWindSpeed" placeholder="ì˜ˆ: 1.5" step="0.1" min="0">
                        <div class="input-hint">ë²”ìœ„: 0 ~ 10 m/s (ì—°í‰ê·  í’ì†)</div>
                    </div>
                </div>
                <button class="weather-button" onclick="predictPowerConsumption()" style="width: 100%; justify-content: center; font-size: 1.1em;">
                    <span>âš¡</span> ì „ë ¥ ì‚¬ìš©ëŸ‰ ì˜ˆì¸¡í•˜ê¸°
                </button>
            </div>
            
            <div class="prediction-result" id="predictionResult" style="display: none;">
                <h3 style="color: #2d3436; margin-bottom: 15px;">ğŸ¯ AI ì˜ˆì¸¡ ê²°ê³¼</h3>
                <div class="prediction-value" id="predictionValue">0 MWh</div>
                <div class="confidence" id="confidenceLevel">ëª¨ë¸ ì‹ ë¢°ë„: 95%</div>
                <p style="margin-top: 20px; color: #636e72; font-size: 1.1em;">
                    ì…ë ¥í•˜ì‹  ë‚ ì”¨ ì¡°ê±´ì—ì„œ ì˜ˆìƒë˜ëŠ” ì—°ê°„ ì „ë ¥ ì‚¬ìš©ëŸ‰ì…ë‹ˆë‹¤ ğŸŒˆ
                </p>
            </div>
        </div>

        <div class="weather-card">
            <h2 class="section-title">
                <span class="icon">ğŸ“Š</span>
                ì‹¤ì œ vs AI ì˜ˆì¸¡ ë¹„êµ ë¶„ì„
            </h2>
            <div class="chart-container">
                <canvas id="comparisonChart"></canvas>
            </div>
        </div>

        <div class="weather-card">
            <h2 class="section-title">
                <span class="icon">ğŸ“‹</span>
                ì—°ë„ë³„ í•™ìŠµ ê²°ê³¼ ìƒì„¸ ë¶„ì„
            </h2>
            <table class="data-table">
                <thead>
                    <tr>
                        <th>ğŸ“… ì—°ë„</th>
                        <th>âš¡ ì‹¤ì œ ì „ë ¥ì‚¬ìš©ëŸ‰ (MWh)</th>
                        <th>ğŸ¤– AI ì˜ˆì¸¡ê°’ (MWh)</th>
                        <th>ğŸ“Š ì •í™•ë„ (%)</th>
                    </tr>
                </thead>
                <tbody id="dataTableBody">
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // ì‹¤ì œ ì—…ë¡œë“œëœ ë°ì´í„° (ëŒ€ì „ ì§€ì—­ 2015-2023ë…„)
        const trainingData = [
            {year: 2015, rainfall: 822.7, solar: 5658.3, windSpeed: 1.5, power: 301260},
            {year: 2016, rainfall: 1228.4, solar: 5697.09, windSpeed: 1.5, power: 303902},
            {year: 2017, rainfall: 1127.5, solar: 5954.04, windSpeed: 1.6, power: 295033},
            {year: 2018, rainfall: 1542.1, solar: 5589.11, windSpeed: 1.5, power: 182180},
            {year: 2019, rainfall: 984.2, solar: 5744.1, windSpeed: 1.4, power: 167834},
            {year: 2020, rainfall: 1614, solar: 5523.26, windSpeed: 1.4, power: 167975},
            {year: 2021, rainfall: 1109.5, solar: 5005.07, windSpeed: 1.5, power: 183669},
            {year: 2022, rainfall: 1203.1, solar: 5533.4, windSpeed: 1.9, power: 184668},
            {year: 2023, rainfall: 2042.5, solar: 5409.97, windSpeed: 1.5, power: 186769}
        ];

        // ë°ì´í„° ê²€ì¦ ë° ì´ˆê¸°í™”
        console.log('âœ… ë‚ ì”¨ ë°ì´í„° ë¡œë“œ ì™„ë£Œ:', trainingData.length, 'ê°œ ë…„ë„ ë°ì´í„°');
        console.log('ğŸŒ¦ï¸ ë°ì´í„° ë²”ìœ„: 2015-2023ë…„ ëŒ€ì „ ì§€ì—­ ë‚ ì”¨ ë° ì „ë ¥ ì‚¬ìš©ëŸ‰ ë°ì´í„°');

        // ê³ ê¸‰ ì‹ ê²½ë§ ëª¨ë¸
        class WeatherPowerAI {
            constructor() {
                this.weights1 = this.randomMatrix(3, 8); // ì…ë ¥ì¸µ -> ì€ë‹‰ì¸µ1
                this.weights2 = this.randomMatrix(8, 4); // ì€ë‹‰ì¸µ1 -> ì€ë‹‰ì¸µ2
                this.weights3 = this.randomMatrix(4, 1); // ì€ë‹‰ì¸µ2 -> ì¶œë ¥ì¸µ
                this.bias1 = this.randomMatrix(1, 8);
                this.bias2 = this.randomMatrix(1, 4);
                this.bias3 = this.randomMatrix(1, 1);
                this.learningRate = 0.001;
                this.momentum = 0.9;
                this.prevDW1 = this.zeroMatrix(3, 8);
                this.prevDW2 = this.zeroMatrix(8, 4);
                this.prevDW3 = this.zeroMatrix(4, 1);
            }

            randomMatrix(rows, cols) {
                const matrix = [];
                for (let i = 0; i < rows; i++) {
                    matrix[i] = [];
                    for (let j = 0; j < cols; j++) {
                        matrix[i][j] = (Math.random() - 0.5) * 0.5;
                    }
                }
                return matrix;
            }

            zeroMatrix(rows, cols) {
                const matrix = [];
                for (let i = 0; i < rows; i++) {
                    matrix[i] = [];
                    for (let j = 0; j < cols; j++) {
                        matrix[i][j] = 0;
                    }
                }
                return matrix;
            }

            relu(x) {
                return Math.max(0, x);
            }

            reluDerivative(x) {
                return x > 0 ? 1 : 0;
            }

            forward(input) {
                // ì…ë ¥ì¸µ -> ì€ë‹‰ì¸µ1
                this.z1 = [];
                this.a1 = [];
                for (let j = 0; j < 8; j++) {
                    let sum = this.bias1[0][j];
                    for (let i = 0; i < 3; i++) {
                        sum += input[i] * this.weights1[i][j];
                    }
                    this.z1[j] = sum;
                    this.a1[j] = this.relu(sum);
                }

                // ì€ë‹‰ì¸µ1 -> ì€ë‹‰ì¸µ2
                this.z2 = [];
                this.a2 = [];
                for (let j = 0; j < 4; j++) {
                    let sum = this.bias2[0][j];
                    for (let i = 0; i < 8; i++) {
                        sum += this.a1[i] * this.weights2[i][j];
                    }
                    this.z2[j] = sum;
                    this.a2[j] = this.relu(sum);
                }

                // ì€ë‹‰ì¸µ2 -> ì¶œë ¥ì¸µ
                let sum = this.bias3[0][0];
                for (let i = 0; i < 4; i++) {
                    sum += this.a2[i] * this.weights3[i][0];
                }
                this.output = sum;

                return this.output;
            }

            backward(input, target) {
                const output_error = this.output - target;
                
                // ì¶œë ¥ì¸µ ê·¸ë˜ë””ì–¸íŠ¸
                const dW3 = [];
                for (let i = 0; i < 4; i++) {
                    dW3[i] = [this.a2[i] * output_error];
                }
                const dB3 = [[output_error]];

                // ì€ë‹‰ì¸µ2 ê·¸ë˜ë””ì–¸íŠ¸
                const delta2 = [];
                for (let i = 0; i < 4; i++) {
                    delta2[i] = this.weights3[i][0] * output_error * this.reluDerivative(this.z2[i]);
                }

                const dW2 = [];
                for (let i = 0; i < 8; i++) {
                    dW2[i] = [];
                    for (let j = 0; j < 4; j++) {
                        dW2[i][j] = this.a1[i] * delta2[j];
                    }
                }
                const dB2 = [delta2];

                // ì€ë‹‰ì¸µ1 ê·¸ë˜ë””ì–¸íŠ¸
                const delta1 = [];
                for (let i = 0; i < 8; i++) {
                    let sum = 0;
                    for (let j = 0; j < 4; j++) {
                        sum += this.weights2[i][j] * delta2[j];
                    }
                    delta1[i] = sum * this.reluDerivative(this.z1[i]);
                }

                const dW1 = [];
                for (let i = 0; i < 3; i++) {
                    dW1[i] = [];
                    for (let j = 0; j < 8; j++) {
                        dW1[i][j] = input[i] * delta1[j];
                    }
                }
                const dB1 = [delta1];

                // ê°€ì¤‘ì¹˜ ì—…ë°ì´íŠ¸ (momentum ì ìš©)
                for (let i = 0; i < 3; i++) {
                    for (let j = 0; j < 8; j++) {
                        const update = this.learningRate * dW1[i][j] + this.momentum * this.prevDW1[i][j];
                        this.weights1[i][j] -= update;
                        this.prevDW1[i][j] = update;
                    }
                }

                for (let i = 0; i < 8; i++) {
                    for (let j = 0; j < 4; j++) {
                        const update = this.learningRate * dW2[i][j] + this.momentum * this.prevDW2[i][j];
                        this.weights2[i][j] -= update;
                        this.prevDW2[i][j] = update;
                    }
                }

                for (let i = 0; i < 4; i++) {
                    const update = this.learningRate * dW3[i][0] + this.momentum * this.prevDW3[i][0];
                    this.weights3[i][0] -= update;
                    this.prevDW3[i][0] = update;
                }

                // ë°”ì´ì–´ìŠ¤ ì—…ë°ì´íŠ¸
                for (let j = 0; j < 8; j++) {
                    this.bias1[0][j] -= this.learningRate * dB1[0][j];
                }
                for (let j = 0; j < 4; j++) {
                    this.bias2[0][j] -= this.learningRate * dB2[0][j];
                }
                this.bias3[0][0] -= this.learningRate * dB3[0][0];
            }

            predict(input) {
                return this.forward(input);
            }
        }

        // ì „ì—­ ë³€ìˆ˜
        let model = new WeatherPowerAI();
        let isTraining = false;
        let trainingInterval;
        let currentEpoch = 0;
        let totalEpochs = 1000;
        let lossHistory = [];
        let bestLoss = Infinity;
        let comparisonChart;
        let normalizationStats = {};

        // ë°ì´í„° ì •ê·œí™”
        function normalizeData(data) {
            const features = ['rainfall', 'solar', 'windSpeed'];
            const stats = {};
            
            features.forEach(feature => {
                const values = data.map(d => d[feature]);
                const mean = values.reduce((a, b) => a + b, 0) / values.length;
                const std = Math.sqrt(values.reduce((a, b) => a + Math.pow(b - mean, 2), 0) / values.length);
                stats[feature] = { mean, std: std || 1 };
            });
            
            const powerValues = data.map(d => d.power);
            const powerMean = powerValues.reduce((a, b) => a + b, 0) / powerValues.length;
            const powerStd = Math.sqrt(powerValues.reduce((a, b) => a + Math.pow(b - powerMean, 2), 0) / powerValues.length);
            stats.power = { mean: powerMean, std: powerStd || 1 };
            
            normalizationStats = stats;
            
            return data.map(d => ({
                ...d,
                normalizedInput: [
                    (d.rainfall - stats.rainfall.mean) / stats.rainfall.std,
                    (d.solar - stats.solar.mean) / stats.solar.std,
                    (d.windSpeed - stats.windSpeed.mean) / stats.windSpeed.std
                ],
                normalizedPower: (d.power - stats.power.mean) / stats.power.std
            }));
        }

        // ì •ê·œí™”ëœ ë°ì´í„°
        const normalizedData = normalizeData(trainingData);

        // í•™ìŠµ ì‹œì‘
        function startTraining() {
            if (isTraining) return;
            
            isTraining = true;
            currentEpoch = 0;
            lossHistory = [];
            
            document.getElementById('trainBtn').disabled = true;
            document.getElementById('stopBtn').disabled = false;
            document.getElementById('trainingStatus').textContent = 'ğŸŒ§ï¸ AI í•™ìŠµ ì¤‘...';
            document.getElementById('learningIndicator').style.display = 'inline-flex';
            
            trainingInterval = setInterval(trainStep, 10);
        }

        // í•™ìŠµ ìŠ¤í…
        function trainStep() {
            if (!isTraining || currentEpoch >= totalEpochs) {
                stopTraining();
                return;
            }

            // ë°°ì¹˜ í•™ìŠµ
            let totalLoss = 0;
            for (let i = 0; i < normalizedData.length; i++) {
                const data = normalizedData[i];
                const prediction = model.forward(data.normalizedInput);
                const loss = Math.pow(prediction - data.normalizedPower, 2);
                totalLoss += loss;
                model.backward(data.normalizedInput, data.normalizedPower);
            }
            
            const avgLoss = totalLoss / normalizedData.length;
            lossHistory.push(avgLoss);
            
            if (avgLoss < bestLoss) {
                bestLoss = avgLoss;
            }
            
            // í•™ìŠµë¥  ì¡°ì • (ì ì‘ì  í•™ìŠµë¥ )
            if (currentEpoch > 0 && currentEpoch % 100 === 0) {
                model.learningRate *= 0.95;
            }
            
            currentEpoch++;
            
            // UI ì—…ë°ì´íŠ¸
            if (currentEpoch % 10 === 0) {
                updateTrainingUI(avgLoss);
            }
            
            // ì°¨íŠ¸ ì—…ë°ì´íŠ¸
            if (currentEpoch % 50 === 0) {
                updateComparisonChart();
                updateDataTable();
            }
        }

        // í•™ìŠµ ì¤‘ì§€
        function stopTraining() {
            isTraining = false;
            clearInterval(trainingInterval);
            
            document.getElementById('trainBtn').disabled = false;
            document.getElementById('stopBtn').disabled = true;
            document.getElementById('trainingStatus').textContent = 'âœ… í•™ìŠµ ì™„ë£Œ';
            document.getElementById('learningIndicator').style.display = 'none';
            
            updateComparisonChart();
            updateDataTable();
        }

        // ëª¨ë¸ ì´ˆê¸°í™”
        function resetModel() {
            if (isTraining) stopTraining();
            
            model = new WeatherPowerAI();
            currentEpoch = 0;
            lossHistory = [];
            bestLoss = Infinity;
            
            document.getElementById('currentEpoch').textContent = '0';
            document.getElementById('accuracy').textContent = '0%';
            document.getElementById('progressFill').style.width = '0%';
            document.getElementById('trainingStatus').textContent = 'ğŸ”„ ëª¨ë¸ ì´ˆê¸°í™” ì™„ë£Œ';
            
            updateDataTable();
            if (comparisonChart) comparisonChart.destroy();
            initializeCharts();
        }

        // í•™ìŠµ UI ì—…ë°ì´íŠ¸
        function updateTrainingUI(loss) {
            document.getElementById('currentEpoch').textContent = currentEpoch;
            document.getElementById('learningRate').textContent = model.learningRate.toFixed(6);
            
            const progress = (currentEpoch / totalEpochs) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            
            // ì •í™•ë„ ê³„ì‚°
            const accuracy = Math.max(0, 100 - (Math.sqrt(bestLoss) * 100));
            document.getElementById('accuracy').textContent = accuracy.toFixed(1) + '%';
        }

        // ë¹„êµ ì°¨íŠ¸ ì—…ë°ì´íŠ¸
        function updateComparisonChart() {
            if (!comparisonChart) return;
            
            const predictions = normalizedData.map(data => {
                const normalizedPred = model.predict(data.normalizedInput);
                return normalizedPred * normalizationStats.power.std + normalizationStats.power.mean;
            });
            
            comparisonChart.data.datasets[1].data = predictions;
            comparisonChart.update('none');
        }

        // ë°ì´í„° í…Œì´ë¸” ì—…ë°ì´íŠ¸
        function updateDataTable() {
            const tbody = document.getElementById('dataTableBody');
            tbody.innerHTML = '';
            
            normalizedData.forEach((data, index) => {
                const normalizedPred = model.predict(data.normalizedInput);
                const prediction = normalizedPred * normalizationStats.power.std + normalizationStats.power.mean;
                const accuracy = Math.max(0, 100 - Math.abs((data.power - prediction) / data.power) * 100);
                
                const row = tbody.insertRow();
                row.insertCell(0).textContent = data.year;
                row.insertCell(1).textContent = data.power.toLocaleString();
                row.insertCell(2).textContent = Math.round(prediction).toLocaleString();
                row.insertCell(3).textContent = accuracy.toFixed(1) + '%';
                
                // ì •í™•ë„ì— ë”°ë¥¸ ìƒ‰ìƒ
                if (accuracy > 90) {
                    row.style.backgroundColor = '#d1f2eb';
                } else if (accuracy > 80) {
                    row.style.backgroundColor = '#fdeaa7';
                } else {
                    row.style.backgroundColor = '#fab1a0';
                }
            });
        }

        // ì „ë ¥ ì‚¬ìš©ëŸ‰ ì˜ˆì¸¡
        function predictPowerConsumption() {
            const rainfall = parseFloat(document.getElementById('inputRainfall').value);
            const solar = parseFloat(document.getElementById('inputSolar').value);
            const windSpeed = parseFloat(document.getElementById('inputWindSpeed').value);
            
            if (isNaN(rainfall) || isNaN(solar) || isNaN(windSpeed)) {
                alert('ğŸŒ¦ï¸ ëª¨ë“  ë‚ ì”¨ ê°’ì„ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }
            
            if (rainfall < 0 || solar < 0 || windSpeed < 0) {
                alert('ğŸŒˆ ë‚ ì”¨ ê°’ì€ 0 ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤!');
                return;
            }
            
            // ì…ë ¥ê°’ ì •ê·œí™”
            const normalizedInput = [
                (rainfall - normalizationStats.rainfall.mean) / normalizationStats.rainfall.std,
                (solar - normalizationStats.solar.mean) / normalizationStats.solar.std,
                (windSpeed - normalizationStats.windSpeed.mean) / normalizationStats.windSpeed.std
            ];
            
            // ì˜ˆì¸¡
            const normalizedPrediction = model.predict(normalizedInput);
            const prediction = normalizedPrediction * normalizationStats.power.std + normalizationStats.power.mean;
            
            // ì‹ ë¢°ë„ ê³„ì‚° (ëª¨ë¸ ì„±ëŠ¥ ê¸°ë°˜)
            const confidence = Math.max(70, Math.min(99, 100 - (Math.sqrt(bestLoss) * 50)));
            
            // ê²°ê³¼ í‘œì‹œ
            document.getElementById('predictionResult').style.display = 'block';
            document.getElementById('predictionValue').textContent = 
                Math.round(prediction).toLocaleString() + ' MWh';
            document.getElementById('confidenceLevel').textContent = 
                `ğŸ¯ AI ì‹ ë¢°ë„: ${confidence.toFixed(1)}%`;
        }

        // ì°¨íŠ¸ ì´ˆê¸°í™”
        function initializeCharts() {
            // ë¹„êµ ì°¨íŠ¸
            const compCtx = document.getElementById('comparisonChart').getContext('2d');
            comparisonChart = new Chart(compCtx, {
                type: 'bar',
                data: {
                    labels: trainingData.map(d => d.year + 'ë…„'),
                    datasets: [{
                        label: 'âš¡ ì‹¤ì œ ì „ë ¥ì‚¬ìš©ëŸ‰',
                        data: trainingData.map(d => d.power),
                        backgroundColor: 'rgba(116, 185, 255, 0.8)',
                        borderColor: 'rgba(116, 185, 255, 1)',
                        borderWidth: 2,
                        borderRadius: 8
                    }, {
                        label: 'ğŸ¤– AI ì˜ˆì¸¡ê°’',
                        data: new Array(trainingData.length).fill(0),
                        backgroundColor: 'rgba(253, 121, 168, 0.8)',
                        borderColor: 'rgba(253, 121, 168, 1)',
                        borderWidth: 2,
                        borderRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'ğŸ“Š ì‹¤ì œ vs AI ì˜ˆì¸¡ ì „ë ¥ì‚¬ìš©ëŸ‰ ë¹„êµ',
                            font: {
                                size: 16,
                                weight: 'bold'
                            },
                            color: '#2d3436'
                        },
                        legend: {
                            labels: {
                                font: {
                                    size: 14
                                },
                                color: '#2d3436'
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            title: {
                                display: true,
                                text: 'ì „ë ¥ì‚¬ìš©ëŸ‰ (MWh)',
                                font: {
                                    size: 14
                                },
                                color: '#636e72'
                            },
                            ticks: {
                                color: '#636e72'
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'ì—°ë„',
                                font: {
                                    size: 14
                                },
                                color: '#636e72'
                            },
                            ticks: {
                                color: '#636e72'
                            },
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    }
                }
            });
        }

        // ì´ˆê¸°í™” ë° ë°ì´í„° í™•ì¸
        window.onload = function() {
            // ë°ì´í„° ë¡œë“œ ìƒíƒœ í™•ì¸
            if (trainingData && trainingData.length > 0) {
                console.log('âœ… ë‚ ì”¨ ë°ì´í„° ë¡œë“œ ì„±ê³µ - ì´', trainingData.length, 'ê°œ ë…„ë„ ë°ì´í„°');
                console.log('ğŸŒ¦ï¸ ì²« ë²ˆì§¸ ë°ì´í„°:', trainingData[0]);
                console.log('ğŸŒ¦ï¸ ë§ˆì§€ë§‰ ë°ì´í„°:', trainingData[trainingData.length - 1]);
                
                // UI ì´ˆê¸°í™”
                initializeCharts();
                updateDataTable();
                
                // ì‚¬ìš©ìì—ê²Œ ë°ì´í„° ë¡œë“œ ì™„ë£Œ ì•Œë¦¼
                document.getElementById('trainingStatus').textContent = 'ğŸŒˆ ë‚ ì”¨ ë°ì´í„° ë¡œë“œ ì™„ë£Œ - í•™ìŠµ ì¤€ë¹„ë¨';
            } else {
                console.error('âŒ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨');
                document.getElementById('trainingStatus').textContent = 'âŒ ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜';
            }
        };
    </script>
</body>
</html>
<!-- partial -->
  <script  src="./script.js"></script>

</body>
</html>
